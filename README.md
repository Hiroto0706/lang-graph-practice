# lang-graph-practice

This is a repository for practicing LangGraph.

# OUTPUT

I answer questions... like below.
```
Hello LangGraph Practicing Project
Q1. あなたの性別は？ -> 男性
Q2. あなたの年齢は？ -> 24歳
Q3. あなたの性格は？ -> 大人しめ、1人が好き、黙々と作業するのが好き、自分の時間を大切にしたい、人との関わりは深く狭く、自分を高める時間を確保したい、仲良くなったらとことんオープンになる
Q4. あなたのMBTIは？ -> INTJ
Q5. 好きなものは？ -> ラーメン、読書、プログラミング、テニス、アニメ、JOJO
Q6. 嫌いなものは？ -> 人生を改善しない行動、Tiktok、Youtubeをダラダラ見る、無意味な時間、まいんマウントロルこと
Q7. 現在の仕事は？ -> エンジニア
Q8. 将来どうなっていたい？ -> エンジニアとしてサービスを作りたい。ものを作り続けたい
Q9. 起床時間は？ -> 朝の7時
Q10. 就寝時間は？ -> 夜の12時
Q11. １日に確保したい自由時間（趣味・休憩など）は？ -> 最低でも4時間は学習の時間にしたい
Q12. 集中しやすい時間帯（朝派／夜派）は？ -> 朝の時間
Q13. 優先度の高いタスク領域（例：勉強／運動／仕事準備など）は？ -> プログライング、ものつくり、読書、

=== User Profile ===
あなたの性別は？ 男性
あなたの年齢は？ 24歳
あなたの性格は？ 大人しめ、1人が好き、黙々と作業するのが好き、自分の時間を大切にしたい、人との関わりは深く狭く、自分を高める時間を確保したい、仲良くなったらとことんオープンになる
あなたのMBTIは？ INTJ
好きなものは？ ラーメン、読書、プログラミング、テニス、アニメ、JOJO
嫌いなものは？ 人生を改善しない行動、Tiktok、Youtubeをダラダラ見る、無意味な時間、まいんマウントロルこと
現在の仕事は？ エンジニア
将来どうなっていたい？ エンジニアとしてサービスを作りたい。ものを作り続けたい
起床時間は？ 朝の7時
就寝時間は？ 夜の12時
１日に確保したい自由時間（趣味・休憩など）は？ 最低でも4時間は学習の時間にしたい
集中しやすい時間帯（朝派／夜派）は？ 朝の時間
優先度の高いタスク領域（例：勉強／運動／仕事準備など）は？ プログライング、ものつくり、読書、
```

Finally, AI agent creates life strategy.

```
=== Generated Plan ===
### 人生戦略: 目的別・優先度別

#### 目的1: 自己成長とスキル向上
- **朝のルーチンを最適化する** (優先度: 高)
  - **実行方法**: 毎朝6時に起床し、7時から9時までの2時間をプログラミングや読書に充てる。集中力が高い時間帯を活用し、技術書や新しいプログラミング言語の学習を進める。
  - **理由**: 朝型であることを活かし、最も集中できる時間に自己成長に直結する活動を行うことで、効率的にスキルを向上させる。

- **オンラインコースやMOOCを活用する** (優先度: 高)
  - **実行方法**: 週に2回、夜の時間を使ってCourseraやUdemyで最新技術のコースを受講。特にAIやデータサイエンスなど、今後のキャリアに役立つ分野を選ぶ。
  - **理由**: 自己成長志向が強く、常に新しいスキルを学び続けることで、エンジニアとしての市場価値を高める。

- **プロジェクトベースの学習を取り入れる** (優先度: 中)
  - **実行方法**: 毎月1つの小規模プロジェクトを設定し、GitHubでオープンソースプロジェクトに参加。実践的なスキルを磨く。
  - **理由**: 理論だけでなく実践を通じて学ぶことで、即戦力としてのスキルを身につける。

#### 目的2: 効率的な時間管理
- **無意味な時間を避けるためのタイムマネジメント** (優先度: 高)
  - **実行方法**: タスク管理ツール（例: Notion, Trello）を活用し、毎日のスケジュールを細かく管理。週末に次週の計画を立てる。
  - **理由**: 無駄な時間を排除し、効率的に目標達成に向けた活動を行う。

- **未来の計画を定期的に見直す** (優先度: 中)
  - **実行方法**: 毎月末に1時間を使ってキャリアや人生の計画を見直し、必要に応じて調整。
  - **理由**: INTJの特性を活かし、常に最適な戦略を維持することで、長期的な目標達成を確実にする。

#### 目的3: 健康とリフレッシュ
- **テニスを通じたリフレッシュ** (優先度: 中)
  - **実行方法**: 週に1回、友人とテニスをプレイ。身体を動かしながらリフレッシュする。
  - **理由**: 健康を維持しつつ、ストレスを発散することで、心身のバランスを保つ。

- **アニメやJOJOを活用したリラックスタイム** (優先度: 低)
  - **実行方法**: 週に2回、夜の時間に好きなアニメを視聴し、リラックスする。
  - **理由**: 趣味を通じてリラックスし、創造性を刺激することで、仕事や学習の効率を向上させる。

- **ラーメンを通じた新しい体験** (優先度: 低)
  - **実行方法**: 週末に新しいラーメン店を訪れ、新しい体験を楽しむ。
  - **理由**: リフレッシュしつつ、日常に新しい刺激を取り入れる。

#### 目的4: 深い人間関係の構築
- **深い人間関係を築くための時間を確保する** (優先度: 中)
  - **実行方法**: 月に1回、信頼できる友人や同僚と会う時間を設ける。
  - **理由**: 精神的なサポートを得ることで、ストレスを軽減し、心の安定を図る。

#### 目的5: 視野を広げる
- **読書の幅を広げる** (優先度: 中)
  - **実行方法**: 毎月1冊、技術書以外のジャンル（哲学、心理学など）の本を読む。
  - **理由**: 異なる視点を取り入れることで、論理的思考を深め、柔軟な発想を養う。

この戦略は、ユーザーの特性や目標に基づいて設計されており、効率的に自己成長を促進しつつ、バランスの取れた生活を実現することを目指しています。
```

...WAO！！！

# What is this?

This repo is references following book.

https://www.amazon.co.jp/LangChain%E3%81%A8LangGraph%E3%81%AB%E3%82%88%E3%82%8BRAG%E3%83%BBAI%E3%82%A8%E3%83%BC%E3%82%B8%E3%82%A7%E3%83%B3%E3%83%88%EF%BC%BB%E5%AE%9F%E8%B7%B5%EF%BC%BD%E5%85%A5%E9%96%80-%E3%82%A8%E3%83%B3%E3%82%B8%E3%83%8B%E3%82%A2%E9%81%B8%E6%9B%B8-%E8%A5%BF%E8%A6%8B-%E5%85%AC%E5%AE%8F/dp/4297145308

# My Motivation

I want to learn LangGraph because I hope to develop applications using RAG and AI Agents.

So I learn this book about LangChain, LangGraph and AI Agents.

# What I learned this project

I learned about how to use LangGraph on this project.

Important things are State, Node, and Edge.

State is memory for AI Agent.
State make you hold a lot of information for you needed.

You write what you want to keep information on State.

```python
class InterviewState(BaseModel):
    user_request: str = Field(..., description="ユーザーからのリクエスト")
    personas: Annotated[list[Persona], operator.add] = Field(
        default_factory=list, description="生成されたペルソナのリスト"
    )
    interviews: Annotated[list[Interview], operator.add] = Field(
        default_factory=list, description="実施されたインタビューのリスト"
    )
    requirements_doc: str = Field(default="", description="生成された要件定義")
    iteration: int = Field(
        default=0, description="ペルソナ生成とインタビューの反復回数"
    )
    is_information_sufficient: bool = Field(
        default=False, description="情報が十分かどうか"
    )
```

For example, request, answer history, and does needed to rerun llm etc...

Node is a component for LangGraph.
LangGraph run from node to node.

You can add node to workflow using `add_node` method.

You can do that like below code.

```python
        # 各ノードの追加
        workflow.add_node("generate_personas", self._generate_personas)
        workflow.add_node("conduct_interviews", self._conduct_interviews)
        workflow.add_node("evaluate_information", self._evaluate_information)
        workflow.add_node("generate_requirements", self._generate_requirements)
```

Edge is a connection component between nodes.

You can add edge below code.

```python
        # エントリーポイントの設定
        workflow.set_entry_point("generate_personas")

        # ノード間のエッジの追加
        workflow.add_edge("generate_personas", "conduct_interviews")
        workflow.add_edge("conduct_interviews", "evaluate_information")

        # 条件付きエッジの追加
        workflow.add_conditional_edges(
            "evaluate_information",
            lambda state: not state.is_information_sufficient and state.iteration < 5,
            {True: "generate_personas", False: "generate_requirements"},
        )
        workflow.add_edge("generate_requirements", END)
```

`set_entry_point` method can make you set start node.
This code, you set generate_personas as start node.

`add_edge` is normal edge, it can connect between nodes.

`conditional_edges` make condition for Node.
1st argument is source node, 2nd argument is condition for node.
3rd argument is conditional branch destination. True section is destination that if 2nd argument condition is true, False is False ver.

 `add_edge` make you set last node.
You can set final node using `add_edge`.


Finally, you invoked `workflow.compile()` method, you are able to create compiled workflow.
That object based on Runnable Class, so you can use invoke method and batch method.

```python
        return workflow.compile()
```

If you run LangGraph, you write code like below.

```python
    def run(self, user_request: str) -> str:
        # 初期状態の設定
        initial_state = InterviewState(user_request=user_request)
        # グラフの実行
        final_state = self.graph.invoke(initial_state)
        # 最終的な要件定義書の取得
        return final_state["requirements_doc"]
```

First, you create initial_state.
Second, you invoke lang graph using invoke method.
Finally, you return data you need.
